!function(){"use strict";const t=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i||(i=Math.random().toString(36).substr(2,5)),`${t}.${i}`},i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.FormieTranslations&&(t=window.FormieTranslations[t]||t),t.replace(/{([a-zA-Z0-9]+)}/g,((t,e)=>i[e]?i[e]:t))};window.FormieTextLimit=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$form=t.$form,this.form=this.$form.form,this.$field=t.$field,this.$text=this.$field.querySelector("[data-limit]"),this.$input=this.$field.querySelector("input, textarea"),this.$text?this.initTextLimits():console.error("Unable to find rich text field “[data-limit]”")}initTextLimits(){this.maxChars=this.$text.getAttribute("data-max-chars"),this.maxWords=this.$text.getAttribute("data-max-words"),this.maxChars&&(this.form.addEventListener(this.$input,t("paste"),this.characterCheck.bind(this),!1),this.form.addEventListener(this.$input,t("keydown"),this.characterCheck.bind(this),!1),this.form.addEventListener(this.$input,t("populate"),this.characterCheck.bind(this),!1),this.$input.dispatchEvent(new Event("keydown",{bubbles:!0}))),this.maxWords&&(this.form.addEventListener(this.$input,t("paste"),this.wordCheck.bind(this),!1),this.form.addEventListener(this.$input,t("keydown"),this.wordCheck.bind(this),!1),this.form.addEventListener(this.$input,t("populate"),this.wordCheck.bind(this),!1),this.$input.dispatchEvent(new Event("keydown",{bubbles:!0})))}characterCheck(t){setTimeout((()=>{const e=this.stripTags(t.target.value),s=this.maxChars-this.count(e),n=["fui-limit-number"],r=1==s||-1==s?"character":"characters";s<0&&n.push("fui-limit-number-error"),this.$text.innerHTML=i(`{startTag}{num}{endTag} ${r} left`,{num:String(s),startTag:`<span class="${n.join(" ")}">`,endTag:"</span>"})}),1)}wordCheck(t){setTimeout((()=>{const e=this.stripTags(t.target.value).split(/\S+/).length-1,s=this.maxWords-e,n=["fui-limit-number"],r=1==s||-1==s?"word":"words";s<0&&n.push("fui-limit-number-error"),this.$text.innerHTML=i(`{startTag}{num}{endTag} ${r} left`,{num:String(s),startTag:`<span class="${n.join(" ")}">`,endTag:"</span>"})}),1)}count(t){return[...t].map((t=>t.codePointAt()>127&&!/\s/.test(t)?`&#${t.codePointAt()};`:t)).join("").length}stripTags(t){return(new DOMParser).parseFromString(t,"text/html").body.textContent||""}}}();